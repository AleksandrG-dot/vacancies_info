# Приложение: Vacancies info
Приложение для работы с вакансиями.  

Запрос данных о вакансиях происходит с сервиса HeadHunter.
Полученные данные хранятся локально в файле формата JSON, не допуская дублирования.

Точка входа: `main.py: user_interaction()`  
Модуль main.py, содержащий функцию для взаимодействия с пользователем, реализует через неё работу всех классов 
приложения и позволяет осуществлять запрос вакансий с hh.ru, выводить пользователю топ n вакансий по зарплате,
искать вакансии по ключевому слову в описании и названии вакансии, удалять вакансии по id или полностью очистить
список вакансий. 

## Программа содержит пакет src с модулями:
- *vacancy.py* - модуль с классом Vacancy для хранения и обработки вакансии
- *api_vacancies.py* - модуль с классом HeadHunterAPI для запроса вакансий с сервера hh.ru через интерфейс API 
- *working_with_files.py* - модуль с классом WorkingFileVacanciesJSON для добавления, получения и удаления данных из файла. 
- *utils.py* - дополнительные функции для работы с данными вакансий.

## Функционал модулей и классов:  
### Класс Vacancy (модуль vacancy)
Класс хранит информацию об одной вакансии.  
Создание экземпляра класса `vacancy = Vacancy(<id_вакансии>, <название_вакансии>, <город>, <зарплата>, <url_ссылка>, <описание>)  `
`<id_вакансии>` - передается в виде строки.  

`<Зарплата>` содержит диапазон зарплат от и до и поддерживает различные валюты. Зарплата передается в формате словаря 
ключами "from", "to", "currency". Формат: `{"from": <число>, "to": <число>, "currency": <кодовое обозначение валюты>}`  
При создании экземпляра класса происходит валидация по зарплате. Отсутствие значения какого-либо из полей "from" 
или "to" (None) будет заменено на 0. В случае отсутствия данных о зарплате (None) в экземпляре класса данные будут 
нулевые.  

Пример создания экземпляра класса Vacancy:    

        developer = Vacancy(
        "116455408",
        "Python-разработчик",
        "Москва",
        {"from": 80000, "to": 105000, "currency": "RUR"},
        "https://hh.ru/vacancy/116455408",
        "От 1 года коммерческой разработки. Умение структурно мыслить, разбивать проект. Создание мониторингов",
    )

Атрибуты класса для работы с пользователем: id, name, city, salary, url, description.  
Примеры работы:  

`print(developer.name)  >>> "Python-разработчик"`  

`print(developer.salary["from"]) >>> 80000`

Строковое представление данных str(developer) вернет строку, не содержит в себе описание вакансии
Пример:  
`print(developer) `   
`ID: 116455408, Вакансия: Python-разработчик, Город: Москва, Зарплата: 80000-105000 RUR, url: https://hh.ru/vacancy/116455408`

- Метод `dict()` вернет словарь с ключами "id", "name", "city", "salary", "url", "description". 
Пример содержимого `developer.dict()`  
`{'id': '116455408', 
'name': 'Python-разработчик', 
'city': 'Москва', 
'salary': {'from': 80000, 'to': 105000, 'currency': 'RUR'}, 
'url': 'https://hh.ru/vacancy/116455408', 
'description': 'От 1 года коммерческой разработки. Умение структурно мыслить, разбивать проект. Создание мониторингов'}`

- Методы сравнения. Класс поддерживает сравнение вакансии между собой по полю salary["from"] операторами сравнения: `==`, `<=`, `>=`
  
  
### Класс HeadHunterAPI (модуль api_vacancies)
Класс запрашивает данные со стороннего сервера hh.ru по интерфейсу API по запрошенной теме. 
Создание экземпляра класса `hh_api = HeadHunterAPI()  `

- Метод `get_vacancies(<текст_запроса>, <количество_вакансий>)` обратится к сервису hh.ru и вернет список, содержащий
экземпляры класса Vacancy
  
### Класс WorkingFileVacanciesJSON (модуль working_with_files)*
Класс осущетвляет работу с файлом JSON, хранящем информацию о вакансиях. Позволяет сохранять, добавлять, 
загружать (читать) и удалять данные. Данные хранит во внутренней структуре (кеше) после первой попытки доступа к
данным. Фильтрует дублирующиеся вакансии при попытке их добавить.
Создание экземпляра класса `work_file = WorkingFileVacanciesJSON(<файл>)`
- Метод `read_from()` выполняет чтение данный из JSON-файла во внутреннюю структуру. В случае удачи вернет True, иначе False  
- Метод `add_to(<добавляемые_данные>)` добавляет данные в файл и во внутреннюю структуру. Добавляемые данные должны быть
представлены списком, содержащим экземпляры класса Vacancy. Так как данные могут дублироваться, возвращает количество 
добавленных вакансий. Дублирующиеся вакансии добавлены не будут.  
- Метод `del_data(<ID>)` удаляет данные о вакансии из JSON-файла по id. * - удалить все. id должен быть типа str.
Возвращает True если удачно, иначе False
- Метод `get_data` возвращает все хранящиеся в файле (кеше) данные о вакансиях в формате списка экземпляров класс Vacancy

### Модуль utils
Модуль содержит вспомогательные функции для работы программы.  
- Функция `get_top_n_vacancies(<данные>, <n>)` возвращает топ n вакансий. Данные должны быть переданы в формате списка
экземпляров класс Vacancy, n - в виде числа типа int.  
- Функция `vacancies_by_keyword(<данные>, <искомый_запрос>)` фильтрует список вакансий по указанному запросу.
Поиск происходит в описании и названии вакансий. Данные должны быть переданы в формате списка
экземпляров класс Vacancy. Возвращает отфильтрованный список экземпляров класс Vacancy.

## Инструкция по установке
Чтобы скачать репозиторий:  
`git clone https://github.com/AleksandrG-dot/vacancies_info.git`

Для установки зависимостей выполните команду:  
`poetry install`

## Тестирование
- Модуль тестирования: 
pytest = "^8.3.4"
pytest-cov = "^6.0.0"  
- Количество тестов: 21
- Code coverage: 94%